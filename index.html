<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>polimiru | æ”¿æ²»ã‚’å¯è¦–åŒ–ã™ã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ </title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="platform-hero">
        <h1>æ”¿æ²»ã‚’ã€ã‚‚ã£ã¨é€æ˜ã«ã€‚</h1>
        <p>ã€Œè¨€ã£ãŸã“ã¨ã€ã¨ã€Œã‚„ã£ãŸã“ã¨ã€ã®ã‚®ãƒ£ãƒƒãƒ—ã‚’å¯è¦–åŒ–ã™ã‚‹ã€‚<br>æ—¥æœ¬æœ€å¤§ç´šã®æ”¿æ²»å®¶ãƒ•ã‚¡ã‚¯ãƒˆãƒã‚§ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€‚</p>
        
        <div class="search-dummy">ğŸ” é¸æŒ™åŒºã‚„æ”¿æ²»å®¶ã®åå‰ã§æ¤œç´¢...</div>

        <div class="hero-actions">
            <button id="area-btn" class="area-select-btn hero-btn">
                <i class="fa-solid fa-location-dot"></i> <span>ã‚¨ãƒªã‚¢æœªè¨­å®š</span>
            </button>
        </div>
    </div>

    <div class="container">
        <div class="section-heading">
            <div class="section-title">æ³¨ç›®ã®é¸æŒ™</div>
            <a href="#" class="section-link">ã™ã¹ã¦è¦‹ã‚‹ &rarr;</a>
        </div>

        <div class="election-grid" id="election-grid"></div>
    </div>

    <script src="elections.js"></script>
    
    <script src="layout.js?v=3"></script>

    <script>
        const grid = document.getElementById('election-grid');
        
        // 1. ä¿å­˜ã•ã‚ŒãŸã‚¨ãƒªã‚¢åã‚’å–å¾—ï¼ˆä¾‹ï¼šã€Œæ±äº¬éƒ½ ç”ºç”°å¸‚ã€ï¼‰
        const savedAreaName = localStorage.getItem('my_area_name') || "";

        // 2. ä¸¦ã³æ›¿ãˆå‡¦ç†
        // ã€Œæ±äº¬éƒ½ ç”ºç”°å¸‚ã€ã®ä¸­ã«ã€Œæ±äº¬éƒ½ã€ã¨ã„ã†æ–‡å­—ãŒå«ã¾ã‚Œã¦ã„ã‚Œã°ã€ãã®é¸æŒ™ã‚’å…ˆé ­ã«ã™ã‚‹
        elections.sort((a, b) => {
            const isAMatch = savedAreaName.includes(a.prefecture);
            const isBMatch = savedAreaName.includes(b.prefecture);

            if (isAMatch && !isBMatch) return -1; // aã‚’å…ˆé ­ã¸
            if (!isAMatch && isBMatch) return 1;  // bã‚’å…ˆé ­ã¸
            return 0; // å¤‰ã‚ã‚‰ãªã„
        });

        // 3. ã‚«ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¦è¡¨ç¤º
        elections.forEach(election => {
            // ãƒãƒƒã‚¸ã®è‰²è¨­å®šï¼ˆlocalã‹nationalã‹ï¼‰
            const badgeClass = election.badgeType === 'national' ? 'badge-national' : 'badge-local';
            
            // ã€Œæ³¨ç›®ã€ãŒå«ã¾ã‚Œã¦ã„ãŸã‚‰èµ¤ãã™ã‚‹
            const statusClass = election.status.includes('æ³¨ç›®') ? 'status-active' : '';

            // è‡ªåˆ†ã®ã‚¨ãƒªã‚¢ã¨ä¸€è‡´ã™ã‚‹å ´åˆã€æ ç·šã‚’é’ãã—ã¦å¼·èª¿ã™ã‚‹ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³æ¼”å‡ºï¼‰
            const highlightStyle = savedAreaName.includes(election.prefecture) ? 'border: 2px solid #1a2e45; box-shadow: 0 0 15px rgba(26, 46, 69, 0.2);' : '';

            const html = `
            <a href="${election.url}" class="election-card" style="${highlightStyle}">
                <div class="card-thumb" style="background-image: url('${election.image}');">
                    <span class="badge ${badgeClass}">${election.prefecture}</span>
                    <span class="status-label ${statusClass}">${election.status}</span>
                </div>
                <div class="card-content">
                    <div class="election-title">${election.title}</div>
                    <span class="election-date">ğŸ“… ${election.date}</span>
                    <div class="election-desc">${election.desc}</div>
                </div>
            </a>
            `;
            
            // ç”»é¢ã«è¿½åŠ 
            grid.insertAdjacentHTML('beforeend', html);
        });
    </script>
</body>
</html>